# /memor.ia.br.nginx.conf

# Default server behavior
location / {
    # Try to serve a file directly, then a directory, then fall back to index.php
    try_files $uri $uri/ /index.php?$args;
}

# Generic PHP handler for all .php files.
location ~ \.php$ {
  # Ensure the script exists before passing to FastCGI.
  try_files $uri =404;

  # Include standard FastCGI parameters.
  include fastcgi_params;

  # Set the SCRIPT_FILENAME to the absolute path of the requested file.
  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;

  # Pass the request to the PHP-FPM process.
  # This assumes PHP-FPM is listening on a TCP socket, as per other configs.
  fastcgi_pass 127.0.0.1:9000;
}
